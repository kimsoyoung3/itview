List<VideoDTO> findByContentId(@Param("contentId") Integer contentId); ì™€
Optional<VideoEntity> findByContentId(Integer contentId); ì°¨ì´ì ê³¼ í•´ì„


ìš”ì•½ ë¹„êµí‘œ
í•­ëª©	List<VideoDTO> findByContentId(...)	Optional<VideoEntity> findByContentId(...)
ë°˜í™˜ íƒ€ì…	List<VideoDTO>	Optional<VideoEntity>
ì¡°íšŒ ìˆ˜	ì—¬ëŸ¬ ê°œ (0ê°œ ì´ìƒ)	í•˜ë‚˜ë§Œ (0 ë˜ëŠ” 1ê°œ)
DTO ë³€í™˜ ì—¬ë¶€	ì´ë¯¸ DTO ìƒíƒœë¡œ ë°˜í™˜	Entity ê·¸ëŒ€ë¡œ ë°˜í™˜
ì‚¬ìš© ìš©ë„	ì½˜í…ì¸ ì— ì˜ìƒ ì—¬ëŸ¬ ê°œ ìˆëŠ” ê²½ìš°	ì½˜í…ì¸ ë‹¹ ì˜ìƒ í•˜ë‚˜ë§Œ ìˆëŠ” ê²½ìš°
JPAì—ì„œ ë©”ì„œë“œ ì‘ì„± ë°©ë²•	JPQL/Native Query í•„ìš” (@Query)	Spring Data JPA ë©”ì„œë“œ ì¿¼ë¦¬ë¡œ ê°€ëŠ¥
Null ì²˜ë¦¬ ë°©ì‹	ë¹„ì–´ ìˆëŠ” ë¦¬ìŠ¤íŠ¸ ([])	Optional.empty() ë˜ëŠ” Optional.of(...)
âœ… ê°ê°ì˜ ì˜ˆì‹œì™€ í•´ì„
ğŸ”¹ 1. List<VideoDTO> findByContentId(...)
@Query("SELECT new com.example.VideoDTO(v) FROM VideoEntity v WHERE v.content.id = :contentId")
List<VideoDTO> findByContentId(@Param("contentId") Integer contentId);


âœ… ì„¤ëª…:

ì´ ë©”ì„œë“œëŠ” contentIdë¡œ í•´ë‹¹ ì½˜í…ì¸ ì— ì—°ê²°ëœ ëª¨ë“  ì˜ìƒ(Video) ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

ê²°ê³¼ëŠ” VideoDTO ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.

ì˜ìƒì´ ì—†ìœ¼ë©´ [] ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•¨.

âœ… ì‚¬ìš© ì˜ˆì‹œ:

List<VideoDTO> videos = videoRepository.findByContentId(10);
if (videos.isEmpty()) {
System.out.println("ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.");
}


âœ… ì–¸ì œ ì‚¬ìš©?

ì½˜í…ì¸  1ê°œì— ì˜ìƒì´ ì—¬ëŸ¬ ê°œì¼ ìˆ˜ ìˆì„ ë•Œ (ì˜ˆ: ê°•ì˜ ì˜ìƒ ëª©ë¡)

í”„ë¡ íŠ¸ì— ëª©ë¡ìœ¼ë¡œ ë³´ì—¬ì¤„ ë•Œ

ğŸ”¹ 2. Optional<VideoEntity> findByContentId(...)
Optional<VideoEntity> findByContentId(Integer contentId);


âœ… ì„¤ëª…:

Spring Data JPAì˜ ë„¤ì´ë° ê·œì¹™ì„ ë”°ë¥¸ ë©”ì„œë“œë¡œ,

VideoEntityì—ì„œ content.idê°€ contentIdì¸ ì˜ìƒ í•˜ë‚˜ë§Œ ì°¾ì•„ì˜µë‹ˆë‹¤.

ê²°ê³¼ê°€ ì—†ìœ¼ë©´ Optional.empty()ë¡œ, ìˆìœ¼ë©´ Optional.of(entity)ë¡œ ê°ì‹¸ì„œ ë°˜í™˜.

âœ… ì‚¬ìš© ì˜ˆì‹œ:

Optional<VideoEntity> videoOpt = videoRepository.findByContentId(10);
videoOpt.ifPresentOrElse(
video -> System.out.println("ì œëª©: " + video.getTitle()),
() -> System.out.println("ì˜ìƒ ì—†ìŒ")
);


âœ… ì–¸ì œ ì‚¬ìš©?

ì½˜í…ì¸ ë§ˆë‹¤ ì˜ìƒì´ 1:1 ê´€ê³„ì¼ ë•Œ

ë‹¨ì¼ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ í™”ë©´ì—ì„œ í™œìš©í•  ë•Œ

â†’ í˜„ì¬ ë‹¹ì‹  í”„ë¡œì íŠ¸ ìƒí™©ì— ì í•©!

âœ… ê²°ë¡ : ë‹¹ì‹ ì˜ ê²½ìš° ì–´ë–¤ ê±¸ ì¨ì•¼ í•˜ë‚˜?

í˜„ì¬ ì½”ë“œ íë¦„ì„ ë³´ë©´:

ì½˜í…ì¸  1ê±´ì— ì˜ìƒì€ 1ê°œë§Œ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥í•œ êµ¬ì¡°ì´ë¯€ë¡œ
âœ… Optional<VideoEntity> findByContentId(...) ê°€ ë§ìŠµë‹ˆë‹¤.

ë‹¨ì¼ ì˜ìƒ ë“±ë¡ í¼ì—ì„œ List<VideoDTO>ë¡œ ë°›ìœ¼ë©´ ì˜¤íˆë ¤ ë³µì¡í•´ì§€ê³  ì˜ˆì™¸ ë°œìƒ ê°€ëŠ¥ì„± ì¦ê°€í•©ë‹ˆë‹¤.

í•„ìš”í•˜ì‹œë©´ ë‘ ë©”ì„œë“œ ëª¨ë‘ ì •ì˜í•´ì„œ,

ë‹¨ì¼ ì˜ìƒ ë“±ë¡/ìˆ˜ì •ì—ëŠ” Optional<VideoEntity> findByContentId(...)ë¥¼

ì˜ìƒ ëª©ë¡ í˜ì´ì§€ì—ëŠ” List<VideoDTO> findByContentId(...)ë¥¼

ë¶„ë¦¬ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì–´ìš” =====================================================================================================
///////////////////////////////
1. Controller (ContentController ì˜ ì¥ë¥´ í¼ ë©”ì„œë“œ)

í˜„ì¬ showGenreForm ë©”ì„œë“œëŠ” ì„ íƒëœ ì¥ë¥´ë¥¼
List<String> (ì˜ë¬¸ ì´ë¦„) ìœ¼ë¡œ ë„˜ê¸°ê³  ìˆìŠµë‹ˆë‹¤.

ìˆ˜ì • ì „
@GetMapping("/content/{contentId}/genre")
public String showGenreForm(@PathVariable Integer contentId, Model model) {
ContentCreateDTO contentDTO = contentService.read(contentId);
List<Genre> selectedGenres = contentService.getGenresByContentId(contentId);
List<String> selectedGenreNames = selectedGenres.stream()
.map(Enum::name)
.toList();

    model.addAttribute("contentDTO", contentDTO);
    model.addAttribute("contentId", contentId);
    model.addAttribute("allGenres", Genre.values());
    model.addAttribute("selectedGenres", selectedGenreNames);  // String ë¦¬ìŠ¤íŠ¸
    model.addAttribute("genreTranslations", genreTranslations);

    return "content/genreForm";
}

ìˆ˜ì • í¬ì¸íŠ¸

selectedGenres ë¥¼ ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ë‚¼ ìˆ˜ë„ ìˆì§€ë§Œ, ë·°ì—ì„œ ì²´í¬ë°•ìŠ¤ì˜ checked ì—¬ë¶€ë¥¼ ì‰½ê²Œ í•˜ë ¤ë©´ Enum ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ë‚´ëŠ” ê²ƒì´ ë” í¸í•©ë‹ˆë‹¤.

ë˜ëŠ” HTMLì—ì„œ ë¬¸ìì—´ë¡œ ë°›ê³  ë¹„êµí•  ë•Œ ë¬¸ìì—´ ë¹„êµë¡œ í•´ì•¼ í•©ë‹ˆë‹¤.

ë°©ë²• 1) Enum ë¦¬ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ì „ë‹¬

model.addAttribute("selectedGenres", selectedGenres); // Enum ë¦¬ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ


ë°©ë²• 2) ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ ì „ë‹¬ ì‹œ Thymeleafì—ì„œ ë¬¸ìì—´ ë¹„êµ

2. View (genreForm.html)
   ìˆ˜ì • ì „ (ì¼ë¶€ ë°œì·Œ)
<div th:each="genre : ${allGenres}" class="form-check">
  <input class="form-check-input" type="checkbox" name="genres" 
         th:id="${'genre-' + genre.name()}" 
         th:value="${genre.name()}" 
         th:checked="${selectedGenres != null} ? ${selectedGenres.contains(genre)} : false">
  <label class="form-check-label" th:for="${'genre-' + genre.name()}" th:text="${genre.name()}">ì¥ë¥´ëª…</label>
</div>

<div class="mt-4">
  <h4>ì„ íƒëœ ì¥ë¥´:</h4>
  <ul>
    <li th:each="genre : ${selectedGenres}" th:text="${genre.name()}"></li>
  </ul>
</div>

ë¬¸ì œì 

th:checked ë¶€ë¶„ì—ì„œ selectedGenres.contains(genre) ëŠ” selectedGenresê°€ ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ë©´ Genre íƒ€ì…ê³¼ ë¹„êµ ë¶ˆì¼ì¹˜.

ì„ íƒëœ ì¥ë¥´ ëª©ë¡ í‘œì‹œ <li> ì—ì„œë„ genreê°€ ë¬¸ìì—´ì´ë©´ genre.name() í˜¸ì¶œ ì‹œ ì˜¤ë¥˜ ë°œìƒ.

ìˆ˜ì • ë°©ë²•

ë§Œì•½ selectedGenresê°€ Enum ë¦¬ìŠ¤íŠ¸ë¼ë©´ ë‹¤ìŒê³¼ ê°™ì´:

<input class="form-check-input" type="checkbox" name="genres"
th:id="${'genre-' + genre.name()}"
th:value="${genre.name()}"
th:checked="${selectedGenres != null} ? ${selectedGenres.contains(genre)} : false">
<label class="form-check-label" th:for="${'genre-' + genre.name()}" th:text="${genreTranslations[genre.name()]}"></label>


ì„ íƒëœ ì¥ë¥´ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥:

<ul>
  <li th:each="genre : ${selectedGenres}" th:text="${genreTranslations[genre.name()]}"></li>
</ul>


ë§Œì•½ selectedGenresê°€ ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ë¼ë©´ ì²´í¬ë°•ìŠ¤ì˜ checked ì¡°ê±´ì„ ì´ë ‡ê²Œ ìˆ˜ì •:

th:checked="${selectedGenres != null} ? ${selectedGenres.contains(genre.name())} : false"


ì¶œë ¥í•  ë•Œë„ ë¬¸ìì—´ì´ë¯€ë¡œ ë°”ë¡œ ì¶œë ¥ ê°€ëŠ¥:

<ul>
  <li th:each="genre : ${selectedGenres}" th:text="${genreTranslations[genre]}"></li>
</ul>

ì •ë¦¬
êµ¬ë¶„	ìˆ˜ì • ì „	ìˆ˜ì • í›„
Controller	model.addAttribute("selectedGenres", selectedGenreNames); (ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸)	model.addAttribute("selectedGenres", selectedGenres); (Enum ë¦¬ìŠ¤íŠ¸) í˜¹ì€ ê·¸ëŒ€ë¡œ ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ ì‚¬ìš©
genreForm.html (ì²´í¬ë°•ìŠ¤)	th:checked="${selectedGenres.contains(genre)}" (Enumê³¼ ë¹„êµ)	<ul><li>Enum ë¦¬ìŠ¤íŠ¸ë©´: th:checked="${selectedGenres.contains(genre)}"</li><li>ë¬¸ìì—´ ë¦¬ìŠ¤íŠ¸ë©´: th:checked="${selectedGenres.contains(genre.name())}"</li></ul>
genreForm.html (ì„ íƒëœ ì¥ë¥´ ëª©ë¡ ì¶œë ¥)	<li th:text="${genre.name()}"> (Enumìœ¼ë¡œ ê°€ì •)	<ul><li>Enumì´ë©´: <li th:text="${genreTranslations[genre.name()]}"></li><li>ë¬¸ìì—´ì´ë©´: <li th:text="${genreTranslations[genre]}"></li></ul>
ì˜ˆì‹œ ì½”ë“œ (Controller + HTML)
Controller (Enum ë¦¬ìŠ¤íŠ¸ ì‚¬ìš©)
@GetMapping("/content/{contentId}/genre")
public String showGenreForm(@PathVariable Integer contentId, Model model) {
ContentCreateDTO contentDTO = contentService.read(contentId);
List<Genre> selectedGenres = contentService.getGenresByContentId(contentId);

    Map<String, String> genreTranslations = Map.ofEntries(
        Map.entry("ACTION", "ì•¡ì…˜"),
        Map.entry("DRAMA", "ë“œë¼ë§ˆ"),
        Map.entry("ROMANCE", "ë¡œë§¨ìŠ¤")
        // ìƒëµ
    );

    model.addAttribute("contentDTO", contentDTO);
    model.addAttribute("contentId", contentId);
    model.addAttribute("allGenres", Genre.values());
    model.addAttribute("selectedGenres", selectedGenres);
    model.addAttribute("genreTranslations", genreTranslations);

    return "content/genreForm";
}

genreForm.html (Thymeleaf)
<div th:each="genre : ${allGenres}" class="form-check">
  <input class="form-check-input" type="checkbox" name="genres"
         th:id="${'genre-' + genre.name()}"
         th:value="${genre.name()}"
         th:checked="${selectedGenres != null} ? ${selectedGenres.contains(genre)} : false" />
  <label class="form-check-label" th:for="${'genre-' + genre.name()}" th:text="${genreTranslations[genre.name()]}"></label>
</div>

<div class="mt-4">
  <h4>ì„ íƒëœ ì¥ë¥´:</h4>
  <ul>
    <li th:each="genre : ${selectedGenres}" th:text="${genreTranslations[genre.name()]}"></li>
  </ul>
</div>